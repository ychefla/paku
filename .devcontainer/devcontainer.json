{
  // Name of the development environment shown inside VS Code.
  "name": "paku-dev",

  // Use the official base image for Ubuntu-based dev containers.
  "image": "mcr.microsoft.com/devcontainers/base:ubuntu",

  // Use the Dockerfile in this .devcontainer directory to build the image.
  "dockerFile": "Dockerfile",

  // Build context: one level up from .devcontainer,
  // so the whole paku/ repository is included.
  "context": "..",


  
  // VS Code extensions that should be installed inside the container.
  "customizations": {
    "vscode": {
      "extensions": [
        // Python runtime support
        "ms-python.python",

        // IntelliSense for Python
        "ms-python.vscode-pylance",

        // Copilot for AI-assisted coding
        "GitHub.copilot",

        // Copilot chat extension can be installed manually if needed
        "GitHub.copilot-chat",

        // PlatformIO IDE for embedded development
        "platformio.platformio-ide"
      ]
    }
  },

  // Use root for simplicity in a personal dev environment.
  "remoteUser": "root",
  
  // Mount SSH agent socket from host for git authentication
  "mounts": [
    "source=${localEnv:HOME}${localEnv:USERPROFILE}/.ssh,target=/root/.ssh,type=bind,consistency=cached"
  ],

  // Pass through USB devices for embedded development (macOS compatible)
  "runArgs": [
    "--privileged",
    "-v", "/dev:/dev"
  ]
  // NOTE:
  // We intentionally do NOT set "workspaceFolder" here.
  // VS Code will use its default (e.g. /workspaces/paku),
  // which actually exists inside the container.
}